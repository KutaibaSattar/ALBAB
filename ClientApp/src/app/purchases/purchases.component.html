<div *ngIf="purchase" class="container">
  <form [formGroup]="form">
    <div class="row">
      <!--  -->
      <div class="col-md-6">
        <div class="form-group">
          <label>Purch No</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <div class="input-group-text">#</div>
            </div>
            <input name="purchNo" formControlName="purNo" class="form-control" />

          </div>

        </div>

        <div class="form-group">
          <label>Supplier</label>
          <div class="input-group">

            <input type="text" class="form-control" matInput [formControl]="appUserId" [matAutocomplete]="customers" placeholder="Customer">

            <mat-autocomplete (optionSelected)="OnHumanSelected($event.option)" #customers="matAutocomplete" [displayWith]="displayFn.bind(this)" >
              <mat-option *ngFor="let option of customeOptions | async"  [value]="option.id">
                {{option.displayName}} -  {{option.userId}}
              </mat-option>
            </mat-autocomplete>

          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <label>Payment Method</label>
          <select name="pMethod" class="form-control">
            <option value="">-Select-</option>
            <option value="Cash">Cash</option>
            <option value="Cheque">Cheque</option>
            <option value="Card">Card</option>
          </select>
        </div>

        <div class="form-group">
          <label>Grand Total</label>
          <div class="input-group">
            <div class="input-group-prepend">

              <div class="input-group-text">AED</div>

            </div>
            <input name="gtotal" class="form-control" readonly />

          </div>
        </div>

      </div>

    </div>

    <ng-container formArrayName="InvItems">

      <!-- Table Header -->
      <table class="table table-bordered table-dark table-hover table-sm">
        <caption>Items</caption>
        <thead class="thead-light">
          <tr>
            <th style="width: 30%">Item</th>
            <th style="width: 10%">Price</th>
            <th style="width: 10%">Quantity</th>
            <th >Total</th>
            <th>
              <a class="btn btn-sm btn-success txt-white" (click)="AddOrEditPurchseItem(purchase)"><i
                  class="fa fa-plus"></i>Add Item</a>
              <a class="btn btn-sm btn-success txt-white" (click)="addRecord()"><i
                    class="fa fa-plus"></i>Add Record</a>
              <a class="btn btn-sm btn-success txt-white" (click)="Save()"><i
                    class="fa fa-plus"></i>Save</a>
            </th>

          </tr>
        </thead>
        <!-- Table Body -->
          <tbody *ngFor="let section of getSections(form); let i = index" >
                <tr [formGroupName]="i">
                  <th>
                    <input  type="text" class="form-control" matInput formControlName="productId" [matAutocomplete]="products"
                      placeholder="Items">

                    <mat-autocomplete (optionSelected)="OnHumanSelected($event.option)" #products="matAutocomplete" [displayWith]="ProductNameFn.bind(this)">
                      <mat-option *ngFor="let option of filteredOptions[i] | async" [value]="option.id">
                        {{option.name}}
                      </mat-option>
                    </mat-autocomplete>
                  </th>
                   <th> <input type="text" class="form-control" autocomplete="off" placeholder="Price" formControlName="price"  ></th>
                  <th> <input type="number" class="form-control" placeholder="Quantity"  formControlName="quantity" autocomplete="off" ></th>
                  <th>Total</th>
                </tr>
          </tbody>
      </table>
    </ng-container>

    <pre>{{form.value | json}}</pre>




    <div class="form-group">

    </div>
  </form>
</div>









